#include <Servo.h>
#include <Wire.h>

//Pins for Ultra-Sonic Sensor
#define trigPin 13
#define echoPin 12

//Pins Variables for Servo Motors
#define r1  3
#define r2  5
#define r3  6
#define l1  9
#define l2  10
#define l3  11

//Slave ID
#define SLAVEID 0x2

//Variable for Distance reading (Ultra-Sonic Sensor)
float distance = 0;

//Variables for Servos
Servo r1Servo;
Servo r2Servo;
Servo r3Servo;
Servo l1Servo;
Servo l2Servo;
Servo l3Servo;

int pos = 0;

char inByte;

void setup() {
  mainSetup();
}
void loop() {
  distance = sonarReading();
}

void mainSetup() {
  Serial.begin(9600);
  Wire.begin();
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  delay(1000);
  Serial.println("Boot-up Completed");
  r1Servo.attach(r1);
  r2Servo.attach(r2);
  r3Servo.attach(r3);
  l1Servo.attach(l1);
  l2Servo.attach(l2);
  l3Servo.attach(l3);
}

void sendCommand(const int slaveid, const int dir){
  Wire.beginTransmission(slaveid); // transmit to device #8
  Wire.write(dir);              // sends one byte
  Wire.endTransmission(); 
}

void recCommand(int bytes){
  inByte = Wire.read();
}

float sonarReading() {
  float echoTime;
  float calculatedDistance;
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, HIGH);

  echoTime = pulseIn(echoPin, HIGH);

  calculatedDistance = echoTime / 148.0;  //
  Serial.println("Calculated Distance(Inches): " + (String)calculatedDistance);
  return calculatedDistance;
}
